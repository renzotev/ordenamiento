//Funcion encargada de hacer la validación de números y mostrar mensajes de error
var Validate = (function () {
    //Obtenemos el ID del elemento a validar
    function Validate(id) {
        this.setInput(id);
        Validate.message = "Por favor digite un valor numerico";
    }
    //Iniciamos los eventos
    Validate.prototype.init = function () {
        this.trigger();
    };
    //Creamos al instancia a nuestro elemento a validar
    Validate.prototype.setInput = function (id) {
        this.input = document.getElementById(id);
    };
    //Obtenemos el elemento a validar
    Validate.prototype.getInput = function () {
        return this.input;
    };
    //Validamos que el número sea entero
    Validate.prototype.isInt = function (value) {
        var x;
        if (isNaN(value)) {
            return false;
        }
        x = parseFloat(value);
        return (x | 0) === x;
    };
    //Eventos encargados de valir y mostrar mensajes de error
    Validate.prototype.trigger = function () {
        var _this = this;
        var error = document.querySelector("#" + this.getInput().id + " + .error");
        error.innerHTML = Validate.message;
        this.getInput().parentElement.classList.add("disabled");
        this.getInput().addEventListener('keyup', function (e) {
            var target = e.target;
            var val = target.value;
            target.parentElement.classList.remove("disabled");
            if (_this.isInt(val)) {
                error.classList.remove("error--active");
                target.parentElement.classList.remove("error");
            }
            else if (val.toString() != "") {
                error.classList.add("error--active");
                target.parentElement.classList.add("error");
            }
        }, false);
    };
    return Validate;
}());
/// <reference path="./Sort.ts" />
//Clase con la logica principal de nuestra aplicación
var Form = (function () {
    //Obtenemos los selectores necesarios
    function Form(options) {
        this.setForm(options.inputID);
        this.setInput(options.inputID);
        this.setResult(options.resultID);
        this.setItemClass(options.itemClass);
        this.setSortButton(options.sortID);
    }
    //Iniciar nuestros eventos y crear nuestro objeto a reordenar
    Form.prototype.init = function () {
        this.createSort();
        this.trigger();
    };
    // Setters y Getters encargados de las instacias al DOM
    Form.prototype.setForm = function (id) {
        this.form = document.getElementById(id).parentElement;
    };
    Form.prototype.setInput = function (id) {
        this.input = document.getElementById(id);
    };
    Form.prototype.setResult = function (id) {
        this.result = document.getElementById(id);
    };
    Form.prototype.setItemClass = function (cssClass) {
        this.itemClass = cssClass;
    };
    Form.prototype.setSortButton = function (id) {
        this.sortButton = document.getElementById(id);
    };
    Form.prototype.createSort = function () {
        this.sort = new Sort(this.itemClass);
    };
    Form.prototype.getForm = function () {
        return this.form;
    };
    Form.prototype.getResult = function () {
        return this.result;
    };
    Form.prototype.getInput = function () {
        return this.input;
    };
    Form.prototype.getSortButton = function () {
        return this.sortButton;
    };
    //Eventos principales - Submit del formulario y Clic al botón de reordenar
    Form.prototype.trigger = function () {
        var _this = this;
        this.getForm().addEventListener('submit', function (e) {
            var target = e.target;
            var value = parseInt(_this.getInput().value);
            if (!target.classList.contains('error') && !target.classList.contains('disabled')) {
                var item = document.createElement("div");
                item.classList.add(_this.itemClass);
                item.innerHTML = value.toString();
                var waitTime = 100;
                _this.getInput().value = "";
                if (!_this.sort.isDuplicate(value) && !isNaN(value)) {
                    _this.sort.addItem(value);
                    _this.getResult().appendChild(item);
                    // Esperamos que el elemento sea agregado al dom para poder agregar la animación
                    setTimeout(function () {
                        _this.getResult().lastChild.classList.add("square--added");
                    }, waitTime);
                }
            }
            e.preventDefault();
        }, false);
        this.getSortButton().addEventListener('click', function (e) {
            _this.sort.asc();
            e.preventDefault();
        });
    };
    return Form;
}());
/// <reference path="./Validate.ts" />
/// <reference path="./Form.ts" />
var validate = new Validate("input-num");
validate.init();
var sort = new Form({
    inputID: "input-num",
    resultID: "result",
    itemClass: "square",
    sortID: "sort"
});
sort.init();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC90cy9WYWxpZGF0ZS50cyIsImFwcC90cy9Gb3JtLnRzIiwiYXBwL3RzL2FwcC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxpRkFBaUY7QUFFakY7SUFLSSx3Q0FBd0M7SUFDeEMsa0JBQVksRUFBVTtRQUNsQixJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ2xCLFFBQVEsQ0FBQyxPQUFPLEdBQUcsb0NBQW9DLENBQUE7SUFDM0QsQ0FBQztJQUVELHVCQUF1QjtJQUNoQix1QkFBSSxHQUFYO1FBQ0ksSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ25CLENBQUM7SUFFRCxtREFBbUQ7SUFDM0MsMkJBQVEsR0FBaEIsVUFBaUIsRUFBVTtRQUN2QixJQUFJLENBQUMsS0FBSyxHQUFxQixRQUFRLENBQUMsY0FBYyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQy9ELENBQUM7SUFFRCxpQ0FBaUM7SUFDekIsMkJBQVEsR0FBaEI7UUFDSSxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztJQUN0QixDQUFDO0lBRUQsb0NBQW9DO0lBQzVCLHdCQUFLLEdBQWIsVUFBYyxLQUFVO1FBQ2xCLElBQUksQ0FBQyxDQUFDO1FBRU4sRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNqQixNQUFNLENBQUMsS0FBSyxDQUFDO1FBQ2YsQ0FBQztRQUVELENBQUMsR0FBRyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFdEIsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMzQixDQUFDO0lBRUQseURBQXlEO0lBQ2pELDBCQUFPLEdBQWY7UUFBQSxpQkFvQkM7UUFuQkcsSUFBSSxLQUFLLEdBQWdCLFFBQVEsQ0FBQyxhQUFhLENBQUMsR0FBRyxHQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxFQUFFLEdBQUcsV0FBVyxDQUFFLENBQUM7UUFDdkYsS0FBSyxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDO1FBQ25DLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUV4RCxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFVBQUMsQ0FBUTtZQUMvQyxJQUFJLE1BQU0sR0FBcUIsQ0FBQyxDQUFDLE1BQU0sQ0FBQztZQUN4QyxJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDO1lBRXZCLE1BQU0sQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUVsRCxFQUFFLENBQUMsQ0FBQyxLQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDbEIsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUM7Z0JBQ3hDLE1BQU0sQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUNuRCxDQUFDO1lBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUM5QixLQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsQ0FBQztnQkFDckMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ2hELENBQUM7UUFFTCxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDZCxDQUFDO0lBQ0wsZUFBQztBQUFELENBN0RBLEFBNkRDLElBQUE7QUMvREQsa0NBQWtDO0FBV2xDLHFEQUFxRDtBQUNyRDtJQVNJLHFDQUFxQztJQUNyQyxjQUFZLE9BQW9CO1FBQzVCLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQzlCLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQy9CLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ2pDLElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3JDLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3ZDLENBQUM7SUFFRCw2REFBNkQ7SUFDdEQsbUJBQUksR0FBWDtRQUNJLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUNsQixJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDbkIsQ0FBQztJQUVELHVEQUF1RDtJQUMvQyxzQkFBTyxHQUFmLFVBQWdCLEVBQVU7UUFDdEIsSUFBSSxDQUFDLElBQUksR0FBZ0IsUUFBUSxDQUFDLGNBQWMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxhQUFhLENBQUM7SUFDdkUsQ0FBQztJQUVPLHVCQUFRLEdBQWhCLFVBQWlCLEVBQVU7UUFDdkIsSUFBSSxDQUFDLEtBQUssR0FBcUIsUUFBUSxDQUFDLGNBQWMsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUMvRCxDQUFDO0lBRU8sd0JBQVMsR0FBakIsVUFBa0IsRUFBVTtRQUN4QixJQUFJLENBQUMsTUFBTSxHQUFnQixRQUFRLENBQUMsY0FBYyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzNELENBQUM7SUFFTywyQkFBWSxHQUFwQixVQUFxQixRQUFnQjtRQUNqQyxJQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQztJQUM5QixDQUFDO0lBRU8sNEJBQWEsR0FBckIsVUFBc0IsRUFBVTtRQUM1QixJQUFJLENBQUMsVUFBVSxHQUFnQixRQUFRLENBQUMsY0FBYyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQy9ELENBQUM7SUFFTyx5QkFBVSxHQUFsQjtRQUNJLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFFTyxzQkFBTyxHQUFmO1FBQ0ksTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDckIsQ0FBQztJQUVPLHdCQUFTLEdBQWpCO1FBQ0ksTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDdkIsQ0FBQztJQUVPLHVCQUFRLEdBQWhCO1FBQ0ksTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDdEIsQ0FBQztJQUVPLDRCQUFhLEdBQXJCO1FBQ0ksTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDM0IsQ0FBQztJQUdELDBFQUEwRTtJQUNsRSxzQkFBTyxHQUFmO1FBQUEsaUJBaUNDO1FBaENHLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLEVBQUUsVUFBQyxDQUFRO1lBQy9DLElBQUksTUFBTSxHQUFnQixDQUFDLENBQUMsTUFBTSxDQUFDO1lBQ25DLElBQUksS0FBSyxHQUFVLFFBQVEsQ0FBQyxLQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFbkQsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDaEYsSUFBSSxJQUFJLEdBQWdCLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ2xELElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLEtBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztnQkFDbkMsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7Z0JBRXRDLElBQUksUUFBUSxHQUFHLEdBQUcsQ0FBQztnQkFFbkIsS0FBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUM7Z0JBRTNCLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNqRCxLQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDekIsS0FBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztvQkFFbkMsZ0ZBQWdGO29CQUNoRixVQUFVLENBQUU7d0JBQ00sS0FBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLFNBQVUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDO29CQUM3RSxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUM7Z0JBQ2pCLENBQUM7WUFDTCxDQUFDO1lBRUQsQ0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO1FBQ3ZCLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUVWLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsVUFBQyxDQUFRO1lBQ3BELEtBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7WUFFaEIsQ0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO1FBQ3ZCLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUNMLFdBQUM7QUFBRCxDQXJHQSxBQXFHQyxJQUFBO0FDakhELHNDQUFzQztBQUN0QyxrQ0FBa0M7QUFFbEMsSUFBSSxRQUFRLEdBQUcsSUFBSSxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDckMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO0FBRXBCLElBQUksSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDO0lBQ2hCLE9BQU8sRUFBRyxXQUFXO0lBQ3JCLFFBQVEsRUFBRSxRQUFRO0lBQ2xCLFNBQVMsRUFBRSxRQUFRO0lBQ25CLE1BQU0sRUFBRSxNQUFNO0NBQ2pCLENBQUMsQ0FBQztBQUNDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL0Z1bmNpb24gZW5jYXJnYWRhIGRlIGhhY2VyIGxhIHZhbGlkYWNpw7NuIGRlIG7Dum1lcm9zIHkgbW9zdHJhciBtZW5zYWplcyBkZSBlcnJvclxyXG5cclxuY2xhc3MgVmFsaWRhdGVcclxue1xyXG4gICAgcHJpdmF0ZSBpbnB1dDogSFRNTElucHV0RWxlbWVudDtcclxuICAgIHB1YmxpYyBzdGF0aWMgbWVzc2FnZTogc3RyaW5nO1xyXG5cclxuICAgIC8vT2J0ZW5lbW9zIGVsIElEIGRlbCBlbGVtZW50byBhIHZhbGlkYXJcclxuICAgIGNvbnN0cnVjdG9yKGlkOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLnNldElucHV0KGlkKTtcclxuICAgICAgICBWYWxpZGF0ZS5tZXNzYWdlID0gXCJQb3IgZmF2b3IgZGlnaXRlIHVuIHZhbG9yIG51bWVyaWNvXCJcclxuICAgIH1cclxuXHJcbiAgICAvL0luaWNpYW1vcyBsb3MgZXZlbnRvc1xyXG4gICAgcHVibGljIGluaXQoKSB7XHJcbiAgICAgICAgdGhpcy50cmlnZ2VyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9DcmVhbW9zIGFsIGluc3RhbmNpYSBhIG51ZXN0cm8gZWxlbWVudG8gYSB2YWxpZGFyXHJcbiAgICBwcml2YXRlIHNldElucHV0KGlkOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmlucHV0ID0gPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vT2J0ZW5lbW9zIGVsIGVsZW1lbnRvIGEgdmFsaWRhclxyXG4gICAgcHJpdmF0ZSBnZXRJbnB1dCgpOiBIVE1MSW5wdXRFbGVtZW50IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnB1dDtcclxuICAgIH1cclxuXHJcbiAgICAvL1ZhbGlkYW1vcyBxdWUgZWwgbsO6bWVybyBzZWEgZW50ZXJvXHJcbiAgICBwcml2YXRlIGlzSW50KHZhbHVlOiBhbnkpOiBib29sZWFuIHtcclxuICAgICAgICAgIGxldCB4O1xyXG5cclxuICAgICAgICAgIGlmIChpc05hTih2YWx1ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHggPSBwYXJzZUZsb2F0KHZhbHVlKTtcclxuXHJcbiAgICAgICAgICByZXR1cm4gKHggfCAwKSA9PT0geDtcclxuICAgIH1cclxuXHJcbiAgICAvL0V2ZW50b3MgZW5jYXJnYWRvcyBkZSB2YWxpciB5IG1vc3RyYXIgbWVuc2FqZXMgZGUgZXJyb3JcclxuICAgIHByaXZhdGUgdHJpZ2dlcigpOiB2b2lkIHtcclxuICAgICAgICBsZXQgZXJyb3IgPSA8SFRNTEVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNcIit0aGlzLmdldElucHV0KCkuaWQgKyBcIiArIC5lcnJvclwiICk7XHJcbiAgICAgICAgZXJyb3IuaW5uZXJIVE1MID0gVmFsaWRhdGUubWVzc2FnZTtcclxuICAgICAgICB0aGlzLmdldElucHV0KCkucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0SW5wdXQoKS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChlOiBFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdGFyZ2V0ID0gPEhUTUxJbnB1dEVsZW1lbnQ+ZS50YXJnZXQ7XHJcbiAgICAgICAgICAgIGxldCB2YWwgPSB0YXJnZXQudmFsdWU7XHJcblxyXG4gICAgICAgICAgICB0YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzYWJsZWRcIik7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0ludCh2YWwpKSB7XHJcbiAgICAgICAgICAgICAgICBlcnJvci5jbGFzc0xpc3QucmVtb3ZlKFwiZXJyb3ItLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJlcnJvclwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWwudG9TdHJpbmcoKSAhPSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICBlcnJvci5jbGFzc0xpc3QuYWRkKFwiZXJyb3ItLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJlcnJvclwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4vU29ydC50c1wiIC8+XHJcblxyXG4vL0ludGVyZmFjZSBlbmNhcmdhZGEgZGUgdmFsaWRhciBsb3MgcGFyYW1ldHJvcyBuZWNlc2FyaW9zIHBhcmEgbnVlc3RyYSBjbGFzZVxyXG5pbnRlcmZhY2UgZm9ybU9wdGlvbnNcclxue1xyXG4gICAgaW5wdXRJRDogc3RyaW5nO1xyXG4gICAgcmVzdWx0SUQ6IHN0cmluZztcclxuICAgIGl0ZW1DbGFzczogc3RyaW5nO1xyXG4gICAgc29ydElEOiBzdHJpbmc7XHJcbn1cclxuXHJcbi8vQ2xhc2UgY29uIGxhIGxvZ2ljYSBwcmluY2lwYWwgZGUgbnVlc3RyYSBhcGxpY2FjacOzblxyXG5jbGFzcyBGb3JtXHJcbntcclxuICAgIHByaXZhdGUgZm9ybTogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGlucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSByZXN1bHQ6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBzb3J0OiBTb3J0O1xyXG4gICAgcHJpdmF0ZSBpdGVtQ2xhc3M6IHN0cmluZztcclxuICAgIHByaXZhdGUgc29ydEJ1dHRvbjogSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgLy9PYnRlbmVtb3MgbG9zIHNlbGVjdG9yZXMgbmVjZXNhcmlvc1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9uczogZm9ybU9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLnNldEZvcm0ob3B0aW9ucy5pbnB1dElEKTtcclxuICAgICAgICB0aGlzLnNldElucHV0KG9wdGlvbnMuaW5wdXRJRCk7XHJcbiAgICAgICAgdGhpcy5zZXRSZXN1bHQob3B0aW9ucy5yZXN1bHRJRCk7XHJcbiAgICAgICAgdGhpcy5zZXRJdGVtQ2xhc3Mob3B0aW9ucy5pdGVtQ2xhc3MpO1xyXG4gICAgICAgIHRoaXMuc2V0U29ydEJ1dHRvbihvcHRpb25zLnNvcnRJRCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9JbmljaWFyIG51ZXN0cm9zIGV2ZW50b3MgeSBjcmVhciBudWVzdHJvIG9iamV0byBhIHJlb3JkZW5hclxyXG4gICAgcHVibGljIGluaXQoKSB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVTb3J0KCk7XHJcbiAgICAgICAgdGhpcy50cmlnZ2VyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2V0dGVycyB5IEdldHRlcnMgZW5jYXJnYWRvcyBkZSBsYXMgaW5zdGFjaWFzIGFsIERPTVxyXG4gICAgcHJpdmF0ZSBzZXRGb3JtKGlkOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmZvcm0gPSA8SFRNTEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLnBhcmVudEVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRJbnB1dChpZDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5pbnB1dCA9IDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldFJlc3VsdChpZDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5yZXN1bHQgPSA8SFRNTEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0SXRlbUNsYXNzKGNzc0NsYXNzOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLml0ZW1DbGFzcyA9IGNzc0NsYXNzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0U29ydEJ1dHRvbihpZDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zb3J0QnV0dG9uID0gPEhUTUxFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZVNvcnQoKSB7XHJcbiAgICAgICAgdGhpcy5zb3J0ID0gbmV3IFNvcnQodGhpcy5pdGVtQ2xhc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0Rm9ybSgpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFJlc3VsdCgpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0SW5wdXQoKTogSFRNTElucHV0RWxlbWVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5wdXQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRTb3J0QnV0dG9uKCk6IEhUTUxFbGVtZW50IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zb3J0QnV0dG9uO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvL0V2ZW50b3MgcHJpbmNpcGFsZXMgLSBTdWJtaXQgZGVsIGZvcm11bGFyaW8geSBDbGljIGFsIGJvdMOzbiBkZSByZW9yZGVuYXJcclxuICAgIHByaXZhdGUgdHJpZ2dlcigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmdldEZvcm0oKS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZTogRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgbGV0IHRhcmdldCA9IDxIVE1MRWxlbWVudD5lLnRhcmdldDtcclxuICAgICAgICAgICAgbGV0IHZhbHVlOm51bWJlciA9IHBhcnNlSW50KHRoaXMuZ2V0SW5wdXQoKS52YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Vycm9yJykgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJykpIHtcclxuICAgICAgICAgICAgICAgIGxldCBpdGVtID0gPEhUTUxFbGVtZW50PmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKHRoaXMuaXRlbUNsYXNzKTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmlubmVySFRNTCA9IHZhbHVlLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHdhaXRUaW1lID0gMTAwO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW5wdXQoKS52YWx1ZSA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNvcnQuaXNEdXBsaWNhdGUodmFsdWUpICYmICFpc05hTih2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnQuYWRkSXRlbSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRSZXN1bHQoKS5hcHBlbmRDaGlsZChpdGVtKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRXNwZXJhbW9zIHF1ZSBlbCBlbGVtZW50byBzZWEgYWdyZWdhZG8gYWwgZG9tIHBhcmEgcG9kZXIgYWdyZWdhciBsYSBhbmltYWNpw7NuXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAoPEhUTUxFbGVtZW50PnRoaXMuZ2V0UmVzdWx0KCkubGFzdENoaWxkKS5jbGFzc0xpc3QuYWRkKFwic3F1YXJlLS1hZGRlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCB3YWl0VGltZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0U29ydEJ1dHRvbigpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGU6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc29ydC5hc2MoKTtcclxuXHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9WYWxpZGF0ZS50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuL0Zvcm0udHNcIiAvPlxyXG5cclxudmFyIHZhbGlkYXRlID0gbmV3IFZhbGlkYXRlKFwiaW5wdXQtbnVtXCIpO1xyXG4gICAgdmFsaWRhdGUuaW5pdCgpO1xyXG5cclxudmFyIHNvcnQgPSBuZXcgRm9ybSh7XHJcbiAgICBpbnB1dElEOiAgXCJpbnB1dC1udW1cIixcclxuICAgIHJlc3VsdElEOiBcInJlc3VsdFwiLFxyXG4gICAgaXRlbUNsYXNzOiBcInNxdWFyZVwiLFxyXG4gICAgc29ydElEOiBcInNvcnRcIlxyXG59KTtcclxuICAgIHNvcnQuaW5pdCgpO1xyXG4iXX0=
